<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Explore the code - Mau Mau</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../_build/_build/css/base.css" rel="stylesheet">
        <link href="../../_build/_build/css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../_build/_build/css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../_build/_build/css/highlight.css" rel="stylesheet">
        <link href="../../_build/css/base.css" rel="stylesheet">
        <link href="../../_build/css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../_build/css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../_build/css/highlight.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Mau Mau</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../guide/installation/">Installation</a>
</li>

                        
                            
<li >
    <a href="../../guide/usage/">Command line access</a>
</li>

                        
                            
<li >
    <a href="../../guide/rules/">Rules of Mau Mau</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Implemenation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../ooommm/">OOOMMM</a>
</li>

                        
                            
<li >
    <a href="../remarks/">Remarks</a>
</li>

                        
                            
<li class="active">
    <a href="./">Explore the code</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../dev/getting-started/">Getting started</a>
</li>

                        
                            
<li >
    <a href="../../dev/static-analysis/">Static code analysis</a>
</li>

                        
                            
<li >
    <a href="../../dev/tests/">Automatic tests</a>
</li>

                        
                            
<li >
    <a href="../../dev/tox/">Using Tox</a>
</li>

                        
                            
<li >
    <a href="../../dev/travis-ci/">Continuous intergration</a>
</li>

                        
                            
<li >
    <a href="../../dev/docs/">Working on documentation</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../remarks/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../dev/getting-started/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/obestwalter/mau-mau">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#introduction">Introduction</a></li>
        
    
        <li class="main "><a href="#setuppy-make-installable">setup.py: make installable</a></li>
        
    
        <li class="main "><a href="#playpy-the-story">play.py: the 'story'</a></li>
        
    
        <li class="main "><a href="#conceptspy-abstract-stuff">concepts.py: abstract stuff</a></li>
        
    
        <li class="main "><a href="#modules-defining-the-classes">Modules defining the classes</a></li>
        
            <li><a href="#objectspy-and-subjectspy">objects.py and subjects.py</a></li>
        
            <li><a href="#rulespy">rules.py</a></li>
        
            <li><a href="#strategypy-how-to-play">strategy.py: how to play</a></li>
        
    
        <li class="main "><a href="#clipy-command-line-access">cli.py: command line access</a></li>
        
    
        <li class="main "><a href="#statspy-create-statistics">stats.py: create statistics</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<p>To develop or explore the code it is best if you install the <a href="../../dev/getting-started/#installation-from-source">sources as editable</a>. This way all the paths are working correct for all use cases (e.g. running the tests) and the command line access <code>mau-mau</code> is also installed.</p>
<p>The code is aiming to be readable and to demonstrate a whole range of concepts and <a href="https://gist.github.com/JeffPaine/6213790">pythonic</a> ways to write software. It is not a toy example, but the nasty details that usually screw with the nice and simple design and make the code grow tentacles and other cruft is not (yet) part of the code, so it can still be read like a nice little completely non-linear story (hopefully). It came into live in a non-linear fashion and should also be read that way.</p>
<h1 id="setuppy-make-installable"><a href="https://github.com/obestwalter/mau-mau/blob/master/setup.py">setup.py</a>: make installable<a class="headerlink" href="#setuppy-make-installable" title="Permanent link">&para;</a></h1>
<p>This module is what is being called, when the package is installed via pip. This way of doing it is part of the Python ecosystem and documented <a href="https://docs.python.org/3.5/distutils/setupscript.html">here</a>. </p>
<h1 id="playpy-the-story"><a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/play.py">play.py</a>: the 'story'<a class="headerlink" href="#playpy-the-story" title="Permanent link">&para;</a></h1>
<p>The overall plot of the Mau Mau story can be found here. It is written in an <a href="https://en.wikipedia.org/wiki/Imperative_programming">imperative</a> way (like a series of commands given to the computer). The code looks like a series of instructions which are to be carried out in a top down order, descending into the functions being called. The order can be influenced by loops (<code>for ... in</code> or <code>while</code>) and conditioned branches (<code>if ... then ... else</code>). These are the basic control flow constructs Python has. There are a few more, but not many.</p>
<p><strong>Behold! The whole program in 6 lines!</strong></p>
<pre><code class="python">def play_game(rulesOfTheGame, players):
    game = setup_game(rulesOfTheGame, players)
    while not game.over:
        player = game.next_turn()
        player.play_turn(game.table)
    return game
</code></pre>

<p>This is the meat of the simulation. Here is where all the magic happens. if you call this function a game of Mau Mau will be simulated and a winner is determined. <strong>6 lines of code</strong> including the function header and the return statement. You now have read the whole plot of the fascinating Mau Mau story. If you want to understand more, you can start digging deeper and visit the definitions of the <a href="https://docs.python.org/3/glossary.html#term-function">functions</a> and <a href="https://docs.python.org/3/tutorial/classes.html">classes</a> used in the <code>play_game</code> function. Just start to explore the code and how the objects interact in whatever non-linear way you might prefer. This gives you an idea of how a simulation of a simple turn based card game can be implemented as a program.</p>
<h1 id="conceptspy-abstract-stuff"><a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/concepts.py">concepts.py</a>: abstract stuff<a class="headerlink" href="#conceptspy-abstract-stuff" title="Permanent link">&para;</a></h1>
<p>The general concepts used in the game as classes.</p>
<h1 id="modules-defining-the-classes">Modules defining the classes<a class="headerlink" href="#modules-defining-the-classes" title="Permanent link">&para;</a></h1>
<p>These look pretty different from <code>game.py</code> and they are. Here is where the object oriented part of the story kicks in. If <code>game.py</code> contains the plot, these modules contain the descriptions of the actors and props of the story. They describe the relevant part of the virtual universe that is created to run the simulation. It contains custom data structures (a.k.a. classes) to model the problem of simulating Mau Mau. You should be able to read through the classes and get an idea of what elements are needed to simulate a card game and how they might interact.</p>
<h2 id="objectspy-and-subjectspy"><a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/objects.py">objects.py</a> and <a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/subjects.py">subjects.py</a><a class="headerlink" href="#objectspy-and-subjectspy" title="Permanent link">&para;</a></h2>
<p>I know .. in Python everything is an object, so this would be meaningless. This is also not <a href="https://en.wikipedia.org/wiki/Subject-oriented_programming">subject oriented programming</a>. These are just good terms for what those classes describe in the context of the program: there are objects in the game which are manipulated by the subjects.</p>
<h2 id="rulespy"><a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/rules.py">rules.py</a><a class="headerlink" href="#rulespy" title="Permanent link">&para;</a></h2>
<p>This contains the classes that implement the rules of Mau Mau. Start reading with the <code>MauMau</code> class and see if you can figure out how it works. There is always one concrete rule active on the table that is valid for the currently played round. Sometimes information gets transferred from one rule to the next (e.g. if a 7 was put on a seven, the number of draws have to accumulate). </p>
<h2 id="strategypy-how-to-play"><a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/strategy.py">strategy.py</a>: how to play<a class="headerlink" href="#strategypy-how-to-play" title="Permanent link">&para;</a></h2>
<p><strong>Note:</strong> A player has a strategy, but the player also attaches it to the active rule, so that it can be queried for the wanted suit if a Jack is on the table.</p>
<h3 id="basicstrategy">BasicStrategy<a class="headerlink" href="#basicstrategy" title="Permanent link">&para;</a></h3>
<p>Player plays according to the rules and always chooses random antidotes if they have any (e.g. 7 on 7 to prevent having to draw) or normal cards. If playing a Jack it always asks for the suit it has the most of. </p>
<p>This can be extended upon to implement "real" strategies.</p>
<h3 id="humanstrategy">HumanStrategy<a class="headerlink" href="#humanstrategy" title="Permanent link">&para;</a></h3>
<p>Mainly to show that the existing design makes it very easy to even add interactivity to let a human play against a computer (<code>mau-mau human</code>).</p>
<p>The impact of this is very likely to be zero on a planetary basis, as this is just a learning tool, but in general one should be very wary of implementing something just because it's easy:</p>
<blockquote>
<p>I call it my billion-dollar mistake. It was the invention of the null reference in 1965. At that time, I was designing the first comprehensive type system for references in an object oriented language (ALGOL W). My goal was to ensure that all use of references should be absolutely safe, with checking performed automatically by the compiler. But I couldn't resist the temptation to put in a null reference, simply because it was so easy to implement. This has led to innumerable errors, vulnerabilities, and system crashes, which have probably caused a billion dollars of pain and damage in the last forty years.</p>
<p>-- Tony Hoare</p>
</blockquote>
<p>... you have been warned.</p>
<h1 id="clipy-command-line-access"><a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/cli.py">cli.py</a>: command line access<a class="headerlink" href="#clipy-command-line-access" title="Permanent link">&para;</a></h1>
<p>This contains the code for the commandline interface. Its function <code>main</code> is configured in <code>setup.py</code> to act like a program called <code>mau-mau</code> that is accessible where the package is installed. At the moment the following can be accessed from the commandline:</p>
<h1 id="statspy-create-statistics"><a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/stats.py">stats.py</a>: create statistics<a class="headerlink" href="#statspy-create-statistics" title="Permanent link">&para;</a></h1>
<p>Contains some functions to run the game simulations and collect statistics. See <a href="../../guide/usage/#collect-statistics">usage examples</a></p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../_build/_build/js/base.js"></script>
        <script src="../../_build/_build/js/bootstrap-3.0.3.min.js"></script>
        <script src="../../_build/_build/js/highlight.pack.js"></script>
        <script src="../../_build/_build/js/jquery-1.10.2.min.js"></script>
        <script src="../../_build/_build/mkdocs/js/lunr-0.5.7.min.js"></script>
        <script src="../../_build/_build/mkdocs/js/mustache.min.js"></script>
        <script src="../../_build/_build/mkdocs/js/require.js"></script>
        <script src="../../_build/_build/mkdocs/js/search.js"></script>
        <script src="../../_build/_build/mkdocs/js/text.js"></script>
        <script src="../../_build/js/base.js"></script>
        <script src="../../_build/js/bootstrap-3.0.3.min.js"></script>
        <script src="../../_build/js/highlight.pack.js"></script>
        <script src="../../_build/js/jquery-1.10.2.min.js"></script>
        <script src="../../_build/mkdocs/js/lunr-0.5.7.min.js"></script>
        <script src="../../_build/mkdocs/js/mustache.min.js"></script>
        <script src="../../_build/mkdocs/js/require.js"></script>
        <script src="../../_build/mkdocs/js/search.js"></script>
        <script src="../../_build/mkdocs/js/text.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
