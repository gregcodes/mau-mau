<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Automatic tests - Mau Mau</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../_build/_build/css/highlight.css" rel="stylesheet">
  <link href="../../_build/_build/css/theme.css" rel="stylesheet">
  <link href="../../_build/_build/css/theme_extra.css" rel="stylesheet">
  <link href="../../_build/css/highlight.css" rel="stylesheet">
  <link href="../../_build/css/theme.css" rel="stylesheet">
  <link href="../../_build/css/theme_extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Automatic tests";
    var mkdocs_page_input_path = "dev/tests.md";
    var mkdocs_page_url = "/dev/tests/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../_build/_build/js/highlight.pack.js"></script>
  <script src="../../_build/_build/js/jquery-2.1.1.min.js"></script>
  <script src="../../_build/_build/js/modernizr-2.8.3.min.js"></script>
  <script src="../../_build/_build/js/theme.js"></script>
  <script src="../../_build/_build/mkdocs/js/lunr-0.5.7.min.js"></script>
  <script src="../../_build/_build/mkdocs/js/mustache.min.js"></script>
  <script src="../../_build/_build/mkdocs/js/require.js"></script>
  <script src="../../_build/_build/mkdocs/js/search.js"></script>
  <script src="../../_build/_build/mkdocs/js/text.js"></script>
  <script src="../../_build/js/highlight.pack.js"></script>
  <script src="../../_build/js/jquery-2.1.1.min.js"></script>
  <script src="../../_build/js/modernizr-2.8.3.min.js"></script>
  <script src="../../_build/js/theme.js"></script>
  <script src="../../_build/mkdocs/js/lunr-0.5.7.min.js"></script>
  <script src="../../_build/mkdocs/js/mustache.min.js"></script>
  <script src="../../_build/mkdocs/js/require.js"></script>
  <script src="../../_build/mkdocs/js/search.js"></script>
  <script src="../../_build/mkdocs/js/text.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Mau Mau</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/usage/">Command line access</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guide/rules/">Rules of Mau Mau</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Implemenation</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../implementation/ooommm/">OOOMMM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../implementation/remarks/">Implementation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../implementation/explore/">Explore the code</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Developer Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../getting-started/">Getting started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../static-analysis/">Static code analysis</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Automatic tests</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#automatic-tests">Automatic tests</a></li>
                
            
                <li class="toctree-l3"><a href="#running-pytest-from-the-command-line">Running py.test from the command line</a></li>
                
                    <li><a class="toctree-l4" href="#automatically-run-tests-on-changes">Automatically run tests on changes:</a></li>
                
            
                <li class="toctree-l3"><a href="#run-pytest-from-pycharm">Run py.test from PyCharm</a></li>
                
                    <li><a class="toctree-l4" href="#preparation">Preparation</a></li>
                
                    <li><a class="toctree-l4" href="#running-tests">Running tests</a></li>
                
            
                <li class="toctree-l3"><a href="#executable-documentation-with-doctests">Executable documentation with doctests</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tox/">Using Tox</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../travis-ci/">Continuous intergration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../docs/">Working on documentation</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Mau Mau</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Developer Guide &raquo;</li>
        
      
    
    <li>Automatic tests</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/obestwalter/mau-mau" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="automatic-tests"><a class="toclink" href="#automatic-tests">Automatic tests</a><a class="headerlink" href="#automatic-tests" title="Permanent link">&para;</a></h1>
<p><a href="http://pytest.org">py.test</a> is my tool of choice. There is aso a <a href="https://docs.python.org/3/library/unittest.html">standard library solution</a>, which has to much API overhead for my taste. py.test does some very <a href="https://pytest.org/latest/assert.html">clever things</a> to let you use the assertion statement directly and you get much better failure reports. This makes for much cleaner test code and less painful testing. </p>
<p><strong>Note</strong>: test modules are here: <a href="https://github.com/obestwalter/mau-mau/tree/master/tests">tests/</a></p>
<p>The ability to write simple functions to test your code cannot be developed early enough, so why not start this right away as well? The examples are dead simple and not covering much yet, but show that it's not rocket science to write automatic tests for your code. Pytest makes it possible to use the inbuilt <code>assert</code> for writing tests.</p>
<h1 id="running-pytest-from-the-command-line"><a class="toclink" href="#running-pytest-from-the-command-line">Running py.test from the command line</a><a class="headerlink" href="#running-pytest-from-the-command-line" title="Permanent link">&para;</a></h1>
<p>py.test looks for modules with the pattern <code>test_*.py</code> downwards from your <a href="https://en.wikipedia.org/wiki/Working_directory">cwd</a>. In those modules it looks for <code>def test_*</code> and <code>class Test*</code>. After collecting everything fitting those patterns it execute all test functions and reports back.</p>
<pre><code>$ cd &lt;/path/to/your/clone&gt;
$ py.test
</code></pre>
<p>Example for a successful run:</p>
<pre><code>========================== test session starts ==========================
platform linux -- Python 3.4.3, pytest-2.9.1, py-1.4.31, pluggy-0.3.1
rootdir: &lt;/path/to/your/clone&gt;, inifile: tox.ini
collected 13 items 
tests/test_pile.py .....
tests/test_player.py ...
tests/test_sim.py .....
======================= 13 passed in 0.03 seconds =======================
</code></pre>
<p>Example for a not so successful run:</p>
<pre><code>======================= test session starts =============================
platform linux -- Python 3.4.4, pytest-2.9.1, py-1.4.31, pluggy-0.3.1
rootdir: &lt;/path/to/your/clone&gt;, inifile: tox.ini
collected 35 items

tests/test_concepts.py ...................
tests/test_objects.py ..F..
tests/test_player.py ...
tests/test_rules.py ...
tests/test_sim.py .....
======================== short test summary info ========================
FAIL tests/test_objects.py::test_non_empty_stock

=============================== FAILURES ================================
_________________________ test_non_empty_stock __________________________

    def test_non_empty_stock():
&gt;       assert not Stock([0])
E       assert not Stock([0])
E        +  where Stock([0]) = Stock([0])

tests/test_objects.py:17: AssertionError
==================== 1 failed, 34 passed in 0.21 seconds ================
</code></pre>
<p>This test failed not because the code is broken, but because I made a wrong assertion about the behaviour of the <code>Stock</code> class. If you pass a list when you create the class you should not expect is to be empty afterwards.</p>
<h2 id="automatically-run-tests-on-changes"><a class="toclink" href="#automatically-run-tests-on-changes">Automatically run tests on changes:</a><a class="headerlink" href="#automatically-run-tests-on-changes" title="Permanent link">&para;</a></h2>
<p>If you want to take this one step further and have the tests being run automatically every time the code changes, you can:</p>
<pre><code>$ pip install pytest-watch
$ cd &lt;/path/to/your/clone&gt;
$ ptw --onfail 'notify-send --urgency=critical "FAIL"' --onpass 'notify-send "PASSED"'
</code></pre>
<p><code>notify-send</code> is the way how I can send desktop notifications from the commandline in my os (<a href="https://wiki.archlinux.org/index.php/Desktop_notifications">Linux</a>). There are lots of ways to do this on every os - even <a href="https://github.com/nels-o/toaster">Windows</a> and <a href="https://github.com/julienXX/terminal-notifier">Mac</a>.</p>
<h1 id="run-pytest-from-pycharm"><a class="toclink" href="#run-pytest-from-pycharm">Run py.test from PyCharm</a><a class="headerlink" href="#run-pytest-from-pycharm" title="Permanent link">&para;</a></h1>
<h2 id="preparation"><a class="toclink" href="#preparation">Preparation</a><a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h2>
<p>The default testrunner in PyCharm is Unittest. You have to switch to py.test like so: 
<em> <strong>Find Action: <a href="https://www.jetbrains.com/help/pycharm/2016.1/testing-frameworks.html">default testrunner</a></strong>: set to py.test 
</em> accept offer to install it in your project virtualenv or do it yourself with <code>pip install pytest</code></p>
<h2 id="running-tests"><a class="toclink" href="#running-tests">Running tests</a><a class="headerlink" href="#running-tests" title="Permanent link">&para;</a></h2>
<p>Depending on where you are, you can run all tests are part of them. The magic action is <a href="https://www.jetbrains.com/help/pycharm/2016.1/creating-and-saving-temporary-run-debug-configurations.html"><code>run context configuration</code></a>. It runs what is sensible in the context. If your focus is in a normal script it runs the script and if the focus is in a module defining tests it will run the configured testrunner with the tests. Running the context configuration with ...</p>
<ul>
<li>focus in the editor, inside a specific test</li>
<li>focus in the editor on the line defining a class containing tests</li>
<li>focus in the <strong>Project Tool Window</strong>, choose the <code>tests/</code> folder and </li>
</ul>
<p>... all yields different results as which tests are run (and they are what you would intuitively expect).</p>
<h1 id="executable-documentation-with-doctests"><a class="toclink" href="#executable-documentation-with-doctests">Executable documentation with doctests</a><a class="headerlink" href="#executable-documentation-with-doctests" title="Permanent link">&para;</a></h1>
<p>You can write simple examples that can double as tests directly in documentation strings. They are called <a href="https://docs.python.org/3.5/library/doctest.html">doctests</a>. You can <a href="https://www.jetbrains.com/help/pycharm/2016.1/run-debug-configuration-doctest.html">run them directly from PyCharm</a> as well.</p>
<p>For an example in the code see <a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/concepts.py">concepts.py</a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tox/" class="btn btn-neutral float-right" title="Using Tox">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../static-analysis/" class="btn btn-neutral" title="Static code analysis"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/obestwalter/mau-mau" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../static-analysis/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../tox/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
