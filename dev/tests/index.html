<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Automatic tests - Mau Mau</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../_build/_build/css/base.css" rel="stylesheet">
        <link href="../../_build/_build/css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../_build/_build/css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../_build/_build/css/highlight.css" rel="stylesheet">
        <link href="../../_build/css/base.css" rel="stylesheet">
        <link href="../../_build/css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../_build/css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../_build/css/highlight.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Mau Mau</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../guide/installation/">Installation</a>
</li>

                        
                            
<li >
    <a href="../../guide/usage/">Command line access</a>
</li>

                        
                            
<li >
    <a href="../../guide/rules/">Rules of Mau Mau</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Implemenation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../implementation/ooommm/">OOOMMM</a>
</li>

                        
                            
<li >
    <a href="../../implementation/remarks/">Remarks</a>
</li>

                        
                            
<li >
    <a href="../../implementation/explore/">Explore the code</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../getting-started/">Getting started</a>
</li>

                        
                            
<li >
    <a href="../static-analysis/">Static code analysis</a>
</li>

                        
                            
<li class="active">
    <a href="./">Automatic tests</a>
</li>

                        
                            
<li >
    <a href="../tox/">Using Tox</a>
</li>

                        
                            
<li >
    <a href="../travis-ci/">Continuous intergration</a>
</li>

                        
                            
<li >
    <a href="../docs/">Working on documentation</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../static-analysis/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../tox/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/obestwalter/mau-mau">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#automatic-tests">Automatic tests</a></li>
        
    
        <li class="main "><a href="#running-pytest-from-the-command-line">Running py.test from the command line</a></li>
        
            <li><a href="#automatically-run-tests-on-changes">Automatically run tests on changes:</a></li>
        
    
        <li class="main "><a href="#run-pytest-from-pycharm">Run py.test from PyCharm</a></li>
        
            <li><a href="#preparation">Preparation</a></li>
        
            <li><a href="#running-tests">Running tests</a></li>
        
    
        <li class="main "><a href="#executable-documentation-with-doctests">Executable documentation with doctests</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="automatic-tests">Automatic tests<a class="headerlink" href="#automatic-tests" title="Permanent link">&para;</a></h1>
<p><a href="http://pytest.org">py.test</a> is my tool of choice. There is aso a <a href="https://docs.python.org/3/library/unittest.html">standard library solution</a>, which has to much API overhead for my taste. py.test does some very <a href="https://pytest.org/latest/assert.html">clever things</a> to let you use the assertion statement directly and you get much better failure reports. This makes for much cleaner test code and less painful testing. </p>
<p><strong>Note</strong>: test modules are here: <a href="https://github.com/obestwalter/mau-mau/tree/master/tests">tests/</a></p>
<p>The ability to write simple functions to test your code cannot be developed early enough, so why not start this right away as well? The examples are dead simple and not covering much yet, but show that it's not rocket science to write automatic tests for your code. Pytest makes it possible to use the inbuilt <code>assert</code> for writing tests.</p>
<h1 id="running-pytest-from-the-command-line">Running py.test from the command line<a class="headerlink" href="#running-pytest-from-the-command-line" title="Permanent link">&para;</a></h1>
<p>py.test looks for modules with the pattern <code>test_*.py</code> downwards from your <a href="https://en.wikipedia.org/wiki/Working_directory">cwd</a>. In those modules it looks for <code>def test_*</code> and <code>class Test*</code>. After collecting everything fitting those patterns it execute all test functions and reports back.</p>
<pre><code>$ cd &lt;/path/to/your/clone&gt;
$ py.test
</code></pre>
<p>Example for a successful run:</p>
<pre><code>========================== test session starts ==========================
platform linux -- Python 3.4.3, pytest-2.9.1, py-1.4.31, pluggy-0.3.1
rootdir: &lt;/path/to/your/clone&gt;, inifile: tox.ini
collected 13 items 
tests/test_pile.py .....
tests/test_player.py ...
tests/test_sim.py .....
======================= 13 passed in 0.03 seconds =======================
</code></pre>
<p>Example for a not so successful run:</p>
<pre><code>======================= test session starts =============================
platform linux -- Python 3.4.4, pytest-2.9.1, py-1.4.31, pluggy-0.3.1
rootdir: &lt;/path/to/your/clone&gt;, inifile: tox.ini
collected 35 items

tests/test_concepts.py ...................
tests/test_objects.py ..F..
tests/test_player.py ...
tests/test_rules.py ...
tests/test_sim.py .....
======================== short test summary info ========================
FAIL tests/test_objects.py::test_non_empty_stock

=============================== FAILURES ================================
_________________________ test_non_empty_stock __________________________

    def test_non_empty_stock():
&gt;       assert not Stock([0])
E       assert not Stock([0])
E        +  where Stock([0]) = Stock([0])

tests/test_objects.py:17: AssertionError
==================== 1 failed, 34 passed in 0.21 seconds ================
</code></pre>
<p>This test failed not because the code is broken, but because I made a wrong assertion about the behaviour of the <code>Stock</code> class. If you pass a list when you create the class you should not expect is to be empty afterwards.</p>
<h2 id="automatically-run-tests-on-changes">Automatically run tests on changes:<a class="headerlink" href="#automatically-run-tests-on-changes" title="Permanent link">&para;</a></h2>
<p>If you want to take this one step further and have the tests being run automatically every time the code changes, you can:</p>
<pre><code>$ pip install pytest-watch
$ cd &lt;/path/to/your/clone&gt;
$ ptw --onfail 'notify-send --urgency=critical "FAIL"' --onpass 'notify-send "PASSED"'
</code></pre>
<p><code>notify-send</code> is the way how I can send desktop notifications from the commandline in my os (<a href="https://wiki.archlinux.org/index.php/Desktop_notifications">Linux</a>). There are lots of ways to do this on every os - even <a href="https://github.com/nels-o/toaster">Windows</a> and <a href="https://github.com/julienXX/terminal-notifier">Mac</a>.</p>
<h1 id="run-pytest-from-pycharm">Run py.test from PyCharm<a class="headerlink" href="#run-pytest-from-pycharm" title="Permanent link">&para;</a></h1>
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h2>
<p>The default testrunner in PyCharm is Unittest. You have to switch to py.test like so: 
<em> <strong>Find Action: <a href="https://www.jetbrains.com/help/pycharm/2016.1/testing-frameworks.html">default testrunner</a></strong>: set to py.test 
</em> accept offer to install it in your project virtualenv or do it yourself with <code>pip install pytest</code></p>
<h2 id="running-tests">Running tests<a class="headerlink" href="#running-tests" title="Permanent link">&para;</a></h2>
<p>Depending on where you are, you can run all tests are part of them. The magic action is <a href="https://www.jetbrains.com/help/pycharm/2016.1/creating-and-saving-temporary-run-debug-configurations.html"><code>run context configuration</code></a>. It runs what is sensible in the context. If your focus is in a normal script it runs the script and if the focus is in a module defining tests it will run the configured testrunner with the tests. Running the context configuration with ...</p>
<ul>
<li>focus in the editor, inside a specific test</li>
<li>focus in the editor on the line defining a class containing tests</li>
<li>focus in the <strong>Project Tool Window</strong>, choose the <code>tests/</code> folder and </li>
</ul>
<p>... all yields different results as which tests are run (and they are what you would intuitively expect).</p>
<h1 id="executable-documentation-with-doctests">Executable documentation with doctests<a class="headerlink" href="#executable-documentation-with-doctests" title="Permanent link">&para;</a></h1>
<p>You can write simple examples that can double as tests directly in documentation strings. They are called <a href="https://docs.python.org/3.5/library/doctest.html">doctests</a>. You can <a href="https://www.jetbrains.com/help/pycharm/2016.1/run-debug-configuration-doctest.html">run them directly from PyCharm</a> as well.</p>
<p>For an example in the code see <a href="https://github.com/obestwalter/mau-mau/blob/master/mau_mau/concepts.py">concepts.py</a></p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../_build/_build/js/base.js"></script>
        <script src="../../_build/_build/js/bootstrap-3.0.3.min.js"></script>
        <script src="../../_build/_build/js/highlight.pack.js"></script>
        <script src="../../_build/_build/js/jquery-1.10.2.min.js"></script>
        <script src="../../_build/_build/mkdocs/js/lunr-0.5.7.min.js"></script>
        <script src="../../_build/_build/mkdocs/js/mustache.min.js"></script>
        <script src="../../_build/_build/mkdocs/js/require.js"></script>
        <script src="../../_build/_build/mkdocs/js/search.js"></script>
        <script src="../../_build/_build/mkdocs/js/text.js"></script>
        <script src="../../_build/js/base.js"></script>
        <script src="../../_build/js/bootstrap-3.0.3.min.js"></script>
        <script src="../../_build/js/highlight.pack.js"></script>
        <script src="../../_build/js/jquery-1.10.2.min.js"></script>
        <script src="../../_build/mkdocs/js/lunr-0.5.7.min.js"></script>
        <script src="../../_build/mkdocs/js/mustache.min.js"></script>
        <script src="../../_build/mkdocs/js/require.js"></script>
        <script src="../../_build/mkdocs/js/search.js"></script>
        <script src="../../_build/mkdocs/js/text.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
